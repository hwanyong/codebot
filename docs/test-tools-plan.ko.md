# Codebot 도구 테스트 및 단독 실행 기능 계획

## 개요

이 문서는 Codebot CLI에 도구 테스트 및 단독 실행 기능을 추가하기 위한 계획을 설명합니다. 이 기능은 개발자가 Codebot의 다양한 도구들을 테스트하고 디버깅할 수 있도록 지원합니다.

## 기능 목표

1. 도구 유닛테스트를 CLI를 통해 직접 실행할 수 있는 기능 제공
2. 사용자가 직접 프롬프트를 입력해 개별 도구를 실행하고 결과 확인 가능
3. 테스트 결과의 시각적 표현 제공
4. 도구 개발 및 디버깅 프로세스 개선

## 1. CLI 인터페이스 확장

### 테스트 명령어 추가

- `codebot test` 명령어 추가
- 도구 카테고리 및 특정 도구를 선택적으로 테스트할 수 있는 옵션 제공
  - `codebot test --tool fileSystem`
  - `codebot test --all`
- 대화형 테스트 메뉴를 통해 테스트할 도구 선택 가능

### 대화형 테스트 메뉴 구성

- 도구 카테고리 선택 메뉴 (fileSystem, terminal, context 등)
- 선택한 카테고리 내 특정 도구 선택 기능
- 테스트 실행 및 결과 표시

## 2. 도구 직접 실행 기능

### 도구 실행 명령어

- `codebot tool` 또는 `codebot run-tool` 명령어 추가
- 실행할 도구를 선택하고 직접 파라미터 입력 가능
  - `codebot tool --category fileSystem --name ListFilesTool`

### 대화형 프롬프트 입력 기능

- 선택한 도구에 필요한 파라미터를 대화형으로 입력
- JSON 형식 직접 입력 또는 대화형 질문에 응답하는 방식 지원
- 필수 파라미터와 선택적 파라미터 구분하여 안내

### 결과 시각화

- 도구 실행 결과를 구조화된 형태로 표시
- 성공/실패 여부 명확히 표시
- 결과 데이터를 JSON 형식이나 사용자 친화적인 형태로 출력

### 실행 히스토리

- 이전에 실행한 도구와 파라미터 기록
- 이전 실행 명령 재사용 기능

## 3. 테스트 결과 표시

- 색상 코드를 사용한 성공/실패 표시 (chalk 라이브러리 활용)
- 테스트 과정 및 결과를 단계별로 시각화
- 테스트 결과 요약 보고서 표시
- 선택적으로 로그 파일에 테스트 결과 기록

## 4. 도구별 테스트 구현

### 파일 시스템 도구 테스트

- 임시 디렉토리 생성 후 파일 조작 테스트
- 파일 읽기, 쓰기, 검색 기능 테스트
- 테스트 후 임시 파일 정리

### 터미널 도구 테스트

- 간단한 셸 명령어 실행 및 결과 확인
- 무해한 명령어(echo, pwd 등)를 통한 기능 검증

### 컨텍스트 도구 테스트

- 샘플 컨텍스트 생성 및 조작 테스트
- 컨텍스트 저장 및 로드 기능 검증

### 기타 도구 테스트

- 번역 도구 등 기타 도구 테스트 구현

## 5. 디렉토리 및 파일 구조

```
src/
├── cli/
│   ├── cli.ts            # CLI 진입점 (test, tool 명령어 추가)
│   ├── testMenu.ts       # 테스트 메뉴 인터페이스
│   └── toolRunner.ts     # 개별 도구 실행 인터페이스
├── test/                 # 테스트 관련 코드
│   ├── index.ts          # 테스트 모듈 내보내기
│   ├── runner.ts         # TestRunner 클래스
│   ├── reporter.ts       # 테스트 결과 표시 유틸리티
│   └── cases/            # 테스트 케이스 구현
│       ├── fileSystem/
│       ├── terminal/
│       ├── context/
│       └── translate/
├── toolRunner/           # 도구 직접 실행 관련 코드
│   ├── index.ts          # 모듈 내보내기
│   ├── prompter.ts       # 프롬프트 입력 처리
│   ├── executor.ts       # 도구 실행 관리
│   └── renderer.ts       # 결과 시각화
```

## 6. 사용 시나리오 예시

### 테스트 모드 예시

```bash
$ codebot test
? 테스트할 도구 카테고리를 선택하세요: fileSystem
? 테스트할 도구를 선택하세요: ListFilesTool
테스트 실행 중...
✓ 기본 경로 테스트 성공
✓ 재귀적 파일 목록 테스트 성공
✓ 존재하지 않는 경로 오류 처리 테스트 성공
테스트 완료: 3개 성공, 0개 실패
```

### 도구 실행 모드 예시

```bash
$ codebot tool
? 실행할 도구 카테고리를 선택하세요: fileSystem
? 실행할 도구를 선택하세요: ListFilesTool
? 파라미터를 입력하세요 (JSON 형식):
{
  "path": "./src",
  "recursive": true
}

실행 결과:
[파일 목록 표시]

다른 파라미터로 재실행하시겠습니까? (Y/n)
```

### 명령어 직접 실행 방식

```bash
$ codebot tool --category fileSystem --name ListFilesTool --params '{"path": "./src", "recursive": true}'

실행 결과:
[파일 목록 표시]
```

## 7. 개발 우선순위

1. 기본 CLI 구조 확장 - `test` 및 `tool` 명령어 추가
2. 도구 실행자(ToolExecutor) 클래스 구현
3. 대화형 프롬프트 입력 인터페이스 구현
4. 결과 시각화 컴포넌트 구현
5. 테스트 케이스 구현과 통합
6. 사용자 경험 개선

## 8. 결론 및 기대 효과

이 기능을 통해 개발자는 Codebot의 도구들을 직관적으로 테스트하고 실험할 수 있게 됩니다. 이는 개발 속도를 향상시키고, 디버깅을 용이하게 하며, 도구의 기능과 한계를 이해하는 데 도움이 될 것입니다.